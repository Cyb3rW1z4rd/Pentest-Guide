# 02 - Files

The shell, or the terminal is a really useful tool. Bash is the standard shell on most Linux distros.

One really useful trick when working with bash is to search for old commands that you have used. You can access this search function by doing`ctrl-r`in the terminal.

The configuration file for the bash shell is`~./bashrc`

## Navigating <a id="navigating"></a>

`pwd`- Present working directory

`cd`- Change directory

`cd ~`- Change directory to your home directory

`cd -`- Go back to previous directory

`ctrl-a` go to begin of line

`ctrl-e` go to end of line

`ls /var/ then space` and press `tab` for list of directories or files

## Looking at files <a id="looking-at-files"></a>

`ls`- List files in directory

`ls -ltr`- Sort list by last modified. -time -reverse

`file`- Show info about file. What type of file it is. If it is a binary or text file for example.

`cat`- Output content of file.

`less`- Output file but just little bit at a time. Use this one. Not`more`.

Use`/searchterm`to search. It is the same command as in vim.`n`to scroll to next search result. Press`q`to quit.

`more`- Output file but just little bit at a time.`less`is better.

You can use the tab command for a listing `- ls /var/` and then `TAB` to show the directories

`type` gives the file type

## Working with files <a id="working-with-files"></a>

`touch`- Create a new file.

for a special character like: mkdir $dollars; mkdir cats\&dogs. So for two special characters you have to use \, one for each special character.

`cp`- Copy

`mkdir`- Make directory.

\# Make entire directory structure

`mkdir -p new/thisonetoo/and/this/one`

`rm`- Remove file

\# Remove recursively and its content. Very dangerous command!

`rm -rf ./directory`

Watch the command destroy an entire machine: [https://www.youtube.com/watch?v=D4fzInlyYQo](https://www.youtube.com/watch?v=D4fzInlyYQo)

`rmdir`- Remove empty directory

`-v` is verbose and lists what has been done

`tail` lists last 10 lines of a file

`head` shows the first 10 lines of a file. Less is more

## **Concatenate and Split**

Cat 1.txt 2.txt 3.txt or

Cat 1.txt 2.txt 3.txt &gt; newfile.txt

### Split

Grep for searching text/strings

Grep fifth \*.txt = search for the word fifth in all file ending with .txt

Xargs

Tee

## Paste, join expand and unexpand

Paste –s –d, file1 prints every line behind each other separated with tabs or in this example with ,

## **Tar for archiving, not compressing**

`Tar –cvf archive.tar`

`c`= create

`f`= file

`v`= verbose

`-A` = append

`-x`= extract = `tar –xvf archive.tar`

**Cpio = copy input output**. Find . \| cpio –o &gt; /tmp/archive.cpio

Find hidden files and pipe to cpio –output &gt; /tmp/archive.cpio

Cpio –I = input for extraction

**Dd = disk drade, only works low level on files**

dd if=abc/file1 of=ddfile1

if=inputfile

of=outputfile

dd if=/dev/sda /dev/sdb for harddrives

## **Compressing and extracting**

`gzip file1.txt` becomes file1.txt.gz – `gunzip file1.txt.gz` becomes file1.txt again

bzip2 file1.txt becomes file1.txt.bz – bunzip2 etc etc

tar –**z**cvf file1.tar.gz file1.txt is tar but with gzip **You must define new file name file1.txt.tar.gz**

`tar –zxvf` for extracting

tar –**j**cvf file1.tar.bz2 file1 --- for bzip2A little bit of everything

`history`- Show commands history. Is stored in `.bash_history`

## Finding files <a id="finding-files"></a>

There are mainly three ways to find files on Linux: **find**, **locate**, and **which**.

### Find <a id="find"></a>

Find is slower than locate but a lot more thorough. You can search for files recursively and with regex and a lot of other features.

```text
# This will send all permissions denied outputs to dev/null.
find / -name file 2 > /dev/null
# Search incasesensitive, that contains the word file.
find / -iname *file* 2 > /dev/null
```

### Locate <a id="locate"></a>

Locate is really fast because it relies on an internal database. So in order to have it updated you need to run:

```text
sudo updatedb
```

Then you can easily find stuff like this:

```text
locate filename
```

### Which <a id="which"></a>

Outputs the path of the binary that you are looking for. It searches through the directories that are defined in your $PATH variable.

```text
which bash

# Usually outputs: /bin/bash
```

### Creating custom bash functions <a id="creating-custom-bash-functions"></a>

If you want to create a new command from other commands, and be able to invoke that command from your terminal, there are a few different way of doing that.

One way is write a bash-script, and then move that script to one of your folders in your $PATH variable.

The other way is to simply write a function in your .bashrc file. You can then invoke that function from anywhere in your terminal.

So for example, if you want to ssh into a machine, but you are tired of having to write the whole command, you can just add this function in your .basrhrc file:

```text
function connecttossh { ssh user@192.168.1.111 }
```

Then you need to source the file, so that it becomes updated:`source ./.bashrc`

Now you can just write`connecttossh`and the function will be executed.

### **Make your own command / alias**

check if it exists = type test

alias todo=”cd Desktop; mkdir dir1; cal; date”

show with **alias** in terminal

touch makes a file so touch firstfile.txt

for a special character like mkdir $dollars ; mkdir cats\&dogs so for 2 you have t use one for each special character

