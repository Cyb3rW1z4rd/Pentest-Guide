# 53 UDP - DNS

Zone transfer to pass a copy of the database. The zone file contains name-to-ip mappings for a portion of the DNS namespace. You then have a roadmap of where clients are with name and IP address information. In addition you van identify services such as mail and directory services through MX and SRV records.

## Perform Zone Transfer with DIG

`dig @nameserver domain-name-here.com axfr`

`dig @nameserver gamma.nl ANY or NS or TXT or A or SOA or AAAA or MX or SPF`

AXFR = all

IXFR = only changed items

**Reverse DNS Lookup**

`dig -x 216.58.220.110`

**Windows DNS zone transfer**

\`nslookup -&gt; set type=any -&gt; ls -d blah.com \`

`nslookup` for windows, also works in Linux `nslookup` -&gt; `server 10.10.10.29`

nslookup -type=MX \[domain\]

**interactive mode**

nslookup

server 10.10.10.53

set type=AAAA or MX or ...

SOA = Start of Authority

A = Hostname to IP

CNAME = Domain name Aliases for example ftp.domain.com and mail.domain.com

MX = Mail server

NS = Name Server

SRV = Service

DNS Split is an internal and external DNS server

* Name server lookup - \[host -t ns megacorpone.com\]
* Reverse Lookup Brute Force - find domains in the same range

  \`for ip in $\(seq 155 190\);do host 50.7.67.$ip;done \|grep -v "not found"\`

## DNSrecon

* Dnsrecon DNS Brute Force - \[dnsrecon -d TARGET -D /usr/share/wordlists/dnsmap.txt -t std --xml ouput.xml\]
* Dnsrecon DNS List of megacorp - \[dnsrecon -d megacorpone.com -t axfr\]

## DNSenum

`dnsenum elsfoo.com -f /usr/share/wordlists/SecLists/Discovery/DNS/subdomains-top1mil-5000.txt    
--threads 10`

dnsmap - `dnsmap elsfoo.com`

\[dnsenum zonetransfer.me\]

## Nmap

NMAP DNS Hostnames Lookup - nmap -F --dns-server &lt;dns server ip&gt; &lt;target ip range&gt;

## `dns-brute`

Attempts to enumerate DNS hostnames by brute force guessing of common subdomains.

```text
nmap --script=dns-brute --script-args dns-brute.domain=foo.com,dns-brute.threads=6,dns-brute.hostlist=./hostfile.txt,newtargets -sS -p 80
```

```text
nmap --script=dns-brute www.foo.com
```

